{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _taggedTemplateLiteralLoose from \"@babel/runtime/helpers/taggedTemplateLiteralLoose\";\n\nvar _templateObject,\n    _jsxFileName = \"/Users/mks/Desktop/CODE/CareerCompass/career-compass/client/src/screens/Home/index.js\";\n\nimport React, { useState } from \"react\";\nimport Button from \"../../components/Button\";\nimport { resume } from \"../../JSON/resume\";\nimport { RootSafeAreaView } from \"../../styles/RootView\";\nimport { from, gql, useMutation } from \"@apollo/client\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport * as DocumentPicker from \"expo-document-picker\";\nimport { encodeB64 } from \"../../utils/base64\";\nvar ADD_USER = gql(_templateObject || (_templateObject = _taggedTemplateLiteralLoose([\"\\n  mutation addUser($userName: String!, $resumeData: String) {\\n    addUser(input: { userName: $userName, resumeData: $resumeData }) {\\n      userName\\n      resumeData\\n    }\\n  }\\n\"])));\nexport default function HomeScreen() {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _useMutation = useMutation(ADD_USER),\n      _useMutation2 = _slicedToArray(_useMutation, 1),\n      addUser = _useMutation2[0];\n\n  var uploadDocument = function uploadDocument() {\n    var file, encodeFile, data, res;\n    return _regeneratorRuntime.async(function uploadDocument$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(DocumentPicker.getDocumentAsync({}));\n\n          case 2:\n            file = _context.sent;\n            encodeFile = encodeB64(file.uri);\n            data = {\n              DocumentAsBase64String: encodeFile,\n              DocumentLastModified: new Date().toISOString().substring(0, 10)\n            };\n            _context.next = 7;\n            return _regeneratorRuntime.awrap(resumeParser(data));\n\n          case 7:\n            res = _context.sent;\n\n            if (res) {\n              uploadResumeData(res);\n            }\n\n          case 9:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var resumeParser = function resumeParser(data) {\n    var END_POINT, response, res;\n    return _regeneratorRuntime.async(function resumeParser$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            END_POINT = \"https://rest.resumeparsing.com/v10/parser/resume\";\n            _context2.next = 4;\n            return _regeneratorRuntime.awrap(fetch(END_POINT, {\n              method: \"POST\",\n              headers: {\n                Accept: \"application/json\",\n                \"Content-Type\": \"application/json\",\n                \"Sovren-AccountId\": \"\",\n                \"Sovren-ServiceKey\": \"\"\n              },\n              data: JSON.stringify(data)\n            }));\n\n          case 4:\n            response = _context2.sent;\n            _context2.next = 7;\n            return _regeneratorRuntime.awrap(response.json());\n\n          case 7:\n            res = _context2.sent;\n            return _context2.abrupt(\"return\", res);\n\n          case 11:\n            _context2.prev = 11;\n            _context2.t0 = _context2[\"catch\"](0);\n            console.error(_context2.t0);\n\n          case 14:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, [[0, 11]], Promise);\n  };\n\n  var uploadResumeData = function uploadResumeData() {\n    return _regeneratorRuntime.async(function uploadResumeData$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return _regeneratorRuntime.awrap(addUser({\n              variables: {\n                userName: \"test@mail.com\",\n                resumeData: JSON.stringify(resume.Value)\n              }\n            }));\n\n          case 2:\n            setLoading(false);\n\n          case 3:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  return React.createElement(RootSafeAreaView, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 5\n    }\n  }, loading ? React.createElement(View, {\n    style: {\n      flex: 1,\n      justifyContent: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  }, React.createElement(ActivityIndicator, {\n    size: \"large\",\n    color: \"slategray\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 11\n    }\n  })) : React.createElement(React.Fragment, null, React.createElement(Button, {\n    text: \"UPLOAD\",\n    onPress: function onPress() {\n      return uploadDocument();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 11\n    }\n  })));\n}","map":{"version":3,"sources":["/Users/mks/Desktop/CODE/CareerCompass/career-compass/client/src/screens/Home/index.js"],"names":["React","useState","Button","resume","RootSafeAreaView","from","gql","useMutation","DocumentPicker","encodeB64","ADD_USER","HomeScreen","loading","setLoading","addUser","uploadDocument","getDocumentAsync","file","encodeFile","uri","data","DocumentAsBase64String","DocumentLastModified","Date","toISOString","substring","resumeParser","res","uploadResumeData","END_POINT","fetch","method","headers","Accept","JSON","stringify","response","json","console","error","variables","userName","resumeData","Value","flex","justifyContent"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport Button from \"../../components/Button\";\nimport { resume } from \"../../JSON/resume\";\n// import GraphqlTest from \"../../components/GraphqlTest\";\n// import Test from \"../../components/Test\";\nimport { RootSafeAreaView } from \"../../styles/RootView\";\nimport { from, gql, useMutation } from \"@apollo/client\";\nimport { ActivityIndicator, Text, View } from \"react-native\";\n\nimport * as DocumentPicker from \"expo-document-picker\";\nimport { encodeB64 } from \"../../utils/base64\";\n\nconst ADD_USER = gql`\n  mutation addUser($userName: String!, $resumeData: String) {\n    addUser(input: { userName: $userName, resumeData: $resumeData }) {\n      userName\n      resumeData\n    }\n  }\n`;\n\nexport default function HomeScreen() {\n  const [loading, setLoading] = useState(false);\n  const [addUser] = useMutation(ADD_USER);\n\n  const uploadDocument = async () => {\n    let file = await DocumentPicker.getDocumentAsync({});\n    const encodeFile = encodeB64(file.uri);\n\n    const data = {\n      DocumentAsBase64String: encodeFile,\n      DocumentLastModified: new Date().toISOString().substring(0, 10),\n    };\n\n    const res = await resumeParser(data);\n    // setLoading(true);\n    if (res) {\n      uploadResumeData(res);\n    }\n  };\n\n  const resumeParser = async (data) => {\n    try {\n      const END_POINT = \"https://rest.resumeparsing.com/v10/parser/resume\";\n      const response = await fetch(END_POINT, {\n        method: \"POST\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n          \"Sovren-AccountId\": \"\",\n          \"Sovren-ServiceKey\": \"\",\n        },\n        data: JSON.stringify(data),\n      });\n      const res = await response.json();\n      return res;\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const uploadResumeData = async () => {\n    // console.log(resume.Value.ResumeData.ContactInformation.EmailAddresses[0]); //email\n    await addUser({\n      variables: {\n        userName: \"test@mail.com\",\n        resumeData: JSON.stringify(resume.Value),\n      },\n    });\n    setLoading(false);\n  };\n\n  return (\n    <RootSafeAreaView>\n      {loading ? (\n        <View style={{ flex: 1, justifyContent: \"center\" }}>\n          <ActivityIndicator size=\"large\" color=\"slategray\" />\n        </View>\n      ) : (\n        <>\n          <Button\n            text=\"UPLOAD\"\n            onPress={\n              () => uploadDocument()\n              // uploadResumeData() //for mock test\n            }\n          />\n        </>\n      )}\n\n      {/* <Test /> */}\n      {/* <GraphqlTest /> */}\n    </RootSafeAreaView>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}